(()=>{"use strict";var e={822:(e,t,r)=>{e.exports=r.p+"f3eddb09e92ca20a0873.jpg"},705:(e,t,r)=>{e.exports=r.p+"43addc8c9c93487e6469.jpg"},141:(e,t,r)=>{e.exports=r.p+"4209575c65bb1abd74fb.jpg"},944:(e,t,r)=>{e.exports=r.p+"e52e71801298b2217c14.jpg"}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(e,r,n){var i=e.items,o=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=i,this._renderer=o,this._containerElement=r,this._handleLocalChange=n}var r,i;return r=t,i=[{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this._itemsSorted.forEach((function(t){e._renderer(t)})):this._items.forEach((function(t){e._renderer(t)})),this._handleLocalChange(this._items)}},{key:"sortByProperty",value:function(t){for(var r=!1;this._containerElement.firstChild;)this._containerElement.removeChild(this._containerElement.lastChild);"byPriceIncrease"===t&&(this._itemsSorted=e(this._items).sort((function(e,t){return e.price-t.price})),r=!0),"byPriceDecrease"===t&&(this._itemsSorted=e(this._items).sort((function(e,t){return t.price-e.price})),r=!0),"byName"===t&&(this._itemsSorted=e(this._items).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),r=!0),this.render(r)}},{key:"addItem",value:function(e,t){this._items.unshift(e),this._handleLocalChange(this._items),t.classList.add("new-product"),this._containerElement.prepend(t)}},{key:"deleteItem",value:function(e){var t=e.name,r=e.desc,n=e.image,i=e.price;this._items.splice(this._items.findIndex((function(e){return e.name===t&&e.desc===r&&e.image===n&&e.price===i})),1),this._handleLocalChange(this._items)}}],i&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name,this.desc=t.desc,this.image=t.image,this.price=t.price,this._templateSelector=r,this._callback=n}var t,r;return t=e,(r=[{key:"_cloneTemplate",value:function(){this._productElement=document.querySelector(this._templateSelector).content.querySelector(".product").cloneNode(!0)}},{key:"_formatPrice",value:function(){this._productPriceFormated="".concat(new Intl.NumberFormat("ru-RU").format(this.price)," руб.")}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton=this._productElement.querySelector(".product__delete-button"),this._deleteButton.addEventListener("click",(function(){e._removeProduct()}))}},{key:"generateProductMarkUp",value:function(){return this._cloneTemplate(),this._formatPrice(),this._productNameElement=this._productElement.querySelector(".product__title"),this._productDescElement=this._productElement.querySelector(".product__desc"),this._productImageElement=this._productElement.querySelector(".product__image"),this._productPriceElement=this._productElement.querySelector(".product__price"),this._productImageElement.src=this.image,this._productImageElement.alt=this.name,this._productNameElement.textContent=this.name,this._productDescElement.textContent=this.desc,this._productPriceElement.textContent=this._productPriceFormated,this._setEventListeners(),this._productElement}},{key:"_removeProduct",value:function(){var e=this;this._productElement.classList.add("remove-product"),this._callback(this),setTimeout((function(){e._productElement.remove(),e._productElement=null}),420)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c=document.querySelector(".products__items"),s=document.forms["product-form"],u=s.querySelector(".form__submit-button"),l=document.querySelector(".header__sort-button"),d=document.querySelector(".notifications");function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._notifications=t}var t,r;return t=e,(r=[{key:"_cloneNode",value:function(){this._notificationElement=document.querySelector("#notification").content.querySelector(".notification").cloneNode(!0)}},{key:"_createNotification",value:function(e){return this._cloneNode(),this._notificationElement.querySelector(".notification__message").textContent=e,this._notificationElement}},{key:"popup",value:function(e){var t,r=this._createNotification(e);this._notifications.append(r),(t=r).classList.remove("hided"),t.classList.add("shown"),setTimeout((function(){return function(e){setTimeout((function(){e.classList.remove("shown")}),1e3),e.classList.add("hided")}(r)}),5e3)}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const m=[{name:"Фотоаппарат моментальной печати Polaroid OneStep",desc:"Рассматривайте ваши фотографии вживую сразу после снимка вместе с новой моментальной цифровой камерой. Благодаря интегрированной в камере системе печати вы сможете печатать фотографии прямо на месте съемки. Всего менее чем за одну минуту вы и ваши друзья получите копии ваших фотографий без использования компьютера или принтера. Вы даже можете обрезать снимок перед тем, как пустить его в печать для того, чтобы получить изображение именно таким, каким захотите вы",image:r(822),price:18e3},{name:"Не нуждается в описании",desc:"",image:r(705),price:25e3},{name:"Наименование товара",desc:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",image:r(141),price:17e3},{name:"Наименование товара",desc:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",image:r(944),price:2e3}];function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=i,this._submitBtn=t,this._inputList=Array.from(this._form.querySelectorAll(r)),this._errorClass=n}var t,r;return t=e,(r=[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e,e.validationMessage):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){this._form.querySelector("#".concat(e.id,"-error")).textContent=t,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){this._form.querySelector("#".concat(e.id,"-error")).textContent="",e.classList.remove(this._errorClass)}},{key:"_enableBtn",value:function(){this._submitBtn.disabled=!1}},{key:"_disableBtn",value:function(){this._submitBtn.disabled=!0}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e){this._hasInvalidInput(e)?this._disableBtn():this._enableBtn()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(this._inputList),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList)}))}))}},{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._disableBtn()})),this._setEventListeners()}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=new p(d);b.popup("Ширина экрана: ".concat(window.innerWidth)),b.popup("Товары загружены"),localStorage.getItem("products")||localStorage.setItem("products",JSON.stringify(m));var g=new i({items:JSON.parse(localStorage.getItem("products")),renderer:function(e){var t=new a(e,"#product",(function(e){b.popup("Товар «".concat(e.name,"» успешно удалён")),g.deleteItem(e)}));c.append(t.generateProductMarkUp())}},c,(function(e){localStorage.setItem("products",JSON.stringify(e))}));g.render();s.addEventListener("submit",(function(e){e.preventDefault();var t=function(e){var t,r,n,i={},o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}(new FormData(e).entries());try{for(o.s();!(t=o.n()).done;){var a=(r=t.value,n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(r,n)||y(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],s=a[1];i[c]=s}}catch(e){o.e(e)}finally{o.f()}return i}(s),r=new a(t,"#product",(function(e){b.popup("Товар «".concat(e.name,"» успешно удалён")),g.deleteItem(e)}));g.addItem(t,r.generateProductMarkUp()),s.reset(),b.popup("Товар  «".concat(r.name,"» успешно добавлен"))})),new _(u,".form__input","form__input_validity_error",s).enableValidation(),l.addEventListener("change",(function(e){b.popup("Товары отсортированы ".concat(e.target.options[e.target.selectedIndex].text.toLowerCase())),g.sortByProperty(l.value)}))})()})();